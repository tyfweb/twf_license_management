@using StackExchange.Profiling
<!DOCTYPE html>
<html lang="en">
    <head>
    
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - LicenseHub</title>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" />
    
    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    
    <!-- Compiled SCSS CSS (includes all custom styles) -->
    <link rel="stylesheet" href="~/css/compiled.css" asp-append-version="true" />
       
    <style>
        /* Font Accessibility Variables - Keep only essential overrides */
        :root {
            --bs-font-size-base: 1rem;
            --font-size-multiplier: 1;
        }
        
        /* Apply font size scaling to common elements - EXCLUDE buttons to preserve Bootstrap sizing */
        body {
            font-size: var(--bs-font-size-base) !important;
        }
        
        .card-body, .table, .form-control, .form-select, 
        .dropdown-item, .nav-link, .breadcrumb, .alert {
            font-size: calc(1rem * var(--font-size-multiplier)) !important;
        }
        
        /* Only scale regular buttons, preserve Bootstrap btn-sm, btn-lg sizing */
        .btn:not(.btn-sm):not(.btn-lg) {
            font-size: calc(1rem * var(--font-size-multiplier)) !important;
        }
        
        /* Use Bootstrap's proportional heading sizes for consistency */
        h1 { font-size: calc(1.875rem * var(--font-size-multiplier)) !important; }
        h2 { font-size: calc(1.5rem * var(--font-size-multiplier)) !important; }
        h3 { font-size: calc(1.25rem * var(--font-size-multiplier)) !important; }
        h4 { font-size: calc(1.125rem * var(--font-size-multiplier)) !important; }
        h5 { font-size: calc(1rem * var(--font-size-multiplier)) !important; }
        h6 { font-size: calc(0.875rem * var(--font-size-multiplier)) !important; }
        
        .small, small { font-size: calc(0.875rem * var(--font-size-multiplier)) !important; }
        
        /* Focus indicators for accessibility */
        .btn:focus, .form-control:focus, .form-select:focus {
            outline: 2px solid #0d6efd;
            outline-offset: 2px;
        }
    </style>
    
    @await RenderSectionAsync("Styles", required: false)
    @await Component.InvokeAsync("ThemeLoader")
</head>
<body >
    @Html.AntiForgeryToken()
    
    <!-- Top Bar -->
    @await Html.PartialAsync("_TopBar")
    
    <!-- Mobile Menu Toggle -->
    <button class="d-md-none btn btn-light position-fixed shadow-sm" 
            style="top: 70px; left: 1rem; z-index: 1051; border-radius: 8px; border: 1px solid #dee2e6;" 
            onclick="toggleSidebar()"
            data-bs-toggle="tooltip" 
            data-bs-placement="right" 
            title="Toggle Menu">
        <i class="fas fa-bars text-primary"></i>
    </button>

    <!-- Sidebar Navigation -->
    @await Component.InvokeAsync("SidebarNavigation")

    <!-- Main Content Area -->
    <div class="licensehub-main-content">
        <div class="container-fluid p-3" style="padding-top: 1rem !important;">
        <!-- Site Messages -->
        @await Html.PartialAsync("_SiteMessages")

        <!-- Page Content -->
        <main role="main">
            @RenderBody()
        </main>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    <script src="~/js/site.js" asp-append-version="true"></script>
    <script src="~/js/licensehub-layout.js" asp-append-version="true"></script>
    
    @await RenderSectionAsync("Scripts", required: false)
    
    @* MiniProfiler - Only show in development *@
    @if (Context.Request.Host.Host.Contains("localhost") && MiniProfiler.Current != null)
    {
        @MiniProfiler.Current.RenderIncludes(Context)
    }
</body>
</html>
